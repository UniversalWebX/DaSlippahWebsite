<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Da Slippah</title>
  <link href="https://fonts.googleapis.com/css2?family=Arimo:wght@400;700&family=League+Spartan:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <nav class="navbar">
    <div class="logo">Da Slippah</div>
    <ul class="nav-links">
      <li><a href="#home" class="nav-link active" onclick="showSection('home')">Home</a></li>
      <li><a href="#movies" class="nav-link" onclick="showSection('movies')">Movies</a></li>
      <li><a href="#status" class="nav-link" onclick="showSection('status')">Status</a></li>
      <li><a href="#soundtracks" class="nav-link" onclick="showSection('soundtracks')">Soundtracks</a></li>
      <li><a href="#blog" class="nav-link" onclick="showSection('blog')">Blog</a></li>
      <li><a href="#userblog" class="nav-link" onclick="showSection('userblog')">Userblog</a></li>
      <li><a href="#applications" class="nav-link" onclick="showSection('applications')">Apply</a></li>
    </ul>
    <div class="auth">
      <button class="auth-btn" onclick="openModal('login')">Login</button>
      <button class="auth-btn" onclick="openModal('register')">Sign Up</button>
      <span id="welcome" style="display:none;color:#00ff6e;margin-left:1rem"></span>
      <button id="logout" class="auth-btn" style="display:none" onclick="logout()">Logout</button>
    </div>
  </nav>

  <!-- HERO BUTTONS NOW WORK -->
  <section id="home" class="section active">
    <div class="hero">
      <h1 class="title-glow">Da Slippah</h1>
      <p id="coming-soon">Da Slippah 2 • Coming 2026 <button onclick="this.parentElement.remove()">×</button></p>
      <div class="hero-buttons">
        <button class="big-btn" onclick="showSection('movies')">Watch Movies</button>
        <button class="big-btn secondary" onclick="showSection('applications')">Applications</button>
        <button class="big-btn secondary" onclick="showSection('status')">Production Status</button>
      </div>
    </div>
  </section>

  <!-- Keep all your other sections exactly the same -->
  <!-- ... (movies, status, soundtracks, etc.) ... -->

  <!-- MODALS (same as before) -->
  <div id="auth-modal" class="modal">...</div>
  <div id="watch-modal" class="modal">...</div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    let user = null, token = null, socket = io(), roomId = null;

    // THIS IS THE FIX — PROPER SECTION SWITCHING
    function showSection(id) {
      // Hide all sections
      document.querySelectorAll('.section').forEach(section => {
        section.classList.remove('active');
      });
      // Remove active class from all nav links
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
      });
      // Show selected section
      document.getElementById(id).classList.add('active');
      // Update nav link
      const activeLink = document.querySelector(`a[href="#${id}"]`);
      if (activeLink) activeLink.classList.add('active');
      // Smooth scroll to top of section
      document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
    }

    // Fix nav links too
    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const target = this.getAttribute('href').substring(1);
        showSection(target);
      });
    });

    // Rest of your existing code (auth, watch, etc.)
    function openModal(type) {
      document.getElementById('auth-modal').style.display = 'flex';
      document.getElementById('auth-title').textContent = type === 'login' ? 'Login' : 'Register';
      document.getElementById('username').style.display = type === 'register' ? 'block' : 'none';
    }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }

    async function handleAuth(e) { /* your existing auth code */ }
    function logout() { user = null; token = null; location.reload(); }

    function watchMovie(movie) {
      const urls = { 
        movie1: "https://drive.google.com/file/d/1LyNZxP_bm2lVbnC6J9HPQn8hKbxlx0Al/preview", 
        memes: "https://drive.google.com/file/d/1P4TUhjsUsp9rH-BxsAFK7UdLbvhhUgOL/preview" 
      };
      document.getElementById('video').src = urls[movie];
      document.getElementById('watch-modal').style.display = 'flex';
    }

    function watchTogether(movie) {
      roomId = prompt("Enter room ID (or blank for new):") || Date.now().toString();
      socket.emit('join-room', { roomId, username: user ? user.username : "Guest" });
      watchMovie(movie);
    }

    function closeWatch() { 
      document.getElementById('watch-modal').style.display = 'none'; 
      document.getElementById('video').src = ''; 
    }

    // Socket events
    socket.on('video-sync', d => { 
      const vid = document.getElementById('video');
      if (Math.abs(vid.currentTime - d.time) > 2) vid.currentTime = d.time;
      d.playing ? vid.play() : vid.pause();
    });
    socket.on('chat', d => { 
      document.getElementById('chat').innerHTML += `<div><strong>${d.username}:</strong> ${d.message}</div>`;
      document.getElementById('chat').scrollTop = document.getElementById('chat').scrollHeight;
    });
    socket.on('room-users', u => { 
      document.getElementById('room-users').textContent = 'Users: ' + u.join(', ');
    });

    function sendChat() {
      const input = document.getElementById('chat-input');
      if (input.value.trim() && roomId) {
        socket.emit('chat', { roomId, message: input.value });
        input.value = '';
      }
    }

    // Video sync every 3 seconds when playing
    setInterval(() => {
      const vid = document.getElementById('video');
      if (roomId && vid && vid.currentTime > 0) {
        socket.emit('video-sync', { 
          roomId, 
          time: vid.currentTime, 
          playing: !vid.paused 
        });
      }
    }, 3000);
  </script>
</body>
</html>
